window.LivewireUIModal=()=>({show:!1,showActiveComponent:!0,activeComponent:!1,componentHistory:[],modalWidth:null,modalFlyout:!1,modalFlyoutPosition:"right",listeners:[],init(){this.modalWidth=this.getActiveComponentModalAttribute("maxWidthClass"),this.setupEventListeners()},setupEventListeners(){this.listeners.push(Livewire.on("closeModal",t=>{this.closeModal((t==null?void 0:t.force)??!1,(t==null?void 0:t.skipPreviousModals)??0,(t==null?void 0:t.destroySkipped)??!1)})),this.listeners.push(Livewire.on("activeModalComponentChanged",({id:t})=>{this.setActiveModalComponent(t)}))},destroy(){this.listeners.forEach(t=>{t()})},getActiveComponentModalAttribute(t){if(this.$wire.get("components")[this.activeComponent]!==void 0)return this.$wire.get("components")[this.activeComponent].modalAttributes[t]},closeModalOnEscape(){if(this.getActiveComponentModalAttribute("closeOnEscape")===!1||!this.closingModal("closingModalOnEscape"))return;let t=this.getActiveComponentModalAttribute("closeOnEscapeIsForceful")===!0;this.closeModal(t)},closeModalOnClickAway(){this.getActiveComponentModalAttribute("closeOnClickAway")!==!1&&this.closingModal("closingModalOnClickAway")&&this.closeModal(!0)},closingModal(t){const e=this.$wire.get("components")[this.activeComponent].name;var o={id:this.activeComponent,closing:!0};return Livewire.dispatchTo(e,t,o),o.closing},closeModal(t=!1,e=0,o=!1){this.show!==!1&&(this.handleCloseEvents(),this.handleSkippedModals(e,o),this.handleModalClosure(t))},handleCloseEvents(){if(this.getActiveComponentModalAttribute("dispatchCloseEvent")===!0){const t=this.$wire.get("components")[this.activeComponent].name;Livewire.dispatch("modalClosed",{name:t})}this.getActiveComponentModalAttribute("destroyOnClose")===!0&&Livewire.dispatch("destroyComponent",{id:this.activeComponent})},handleSkippedModals(t,e){if(t>0)for(var o=0;o<t;o++){if(e){const s=this.componentHistory[this.componentHistory.length-1];Livewire.dispatch("destroyComponent",{id:s})}this.componentHistory.pop()}},handleModalClosure(t){const e=this.componentHistory.pop();e&&!t?e?this.setActiveModalComponent(e,!0):this.setShowPropertyTo(!1):this.setShowPropertyTo(!1)},setActiveModalComponent(t,e=!1){this.setShowPropertyTo(!0),this.activeComponent!==t&&(this.activeComponent!==!1&&e===!1&&this.componentHistory.push(this.activeComponent),this.updateActiveComponent(t))},updateActiveComponent(t){let e=50;this.activeComponent===!1?(this.activeComponent=t,this.showActiveComponent=!0,this.modalWidth=this.getActiveComponentModalAttribute("maxWidthClass"),this.modalFlyout=this.getActiveComponentModalAttribute("modalFlyout"),this.modalFlyoutPosition=this.getActiveComponentModalAttribute("modalFlyoutPosition")):(this.showActiveComponent=!1,e=400,setTimeout(()=>{this.activeComponent=t,this.showActiveComponent=!0,this.modalWidth=this.getActiveComponentModalAttribute("maxWidthClass"),this.modalFlyout=this.getActiveComponentModalAttribute("modalFlyout"),this.modalFlyoutPosition=this.getActiveComponentModalAttribute("modalFlyoutPosition")},300)),this.setFocus(t,e)},setFocus(t,e){this.$nextTick(()=>{var s;let o=(s=this.$refs[t])==null?void 0:s.querySelector("[autofocus]");o&&setTimeout(()=>{o.focus()},e)})},focusables(){return[...this.$el.querySelectorAll("a, button, input:not([type='hidden']), textarea, select, details, [tabindex]:not([tabindex='-1'])")].filter(e=>!e.hasAttribute("disabled"))},firstFocusable(){return this.focusables()[0]},lastFocusable(){return this.focusables().slice(-1)[0]},nextFocusable(){return this.focusables()[this.nextFocusableIndex()]||this.firstFocusable()},prevFocusable(){return this.focusables()[this.prevFocusableIndex()]||this.lastFocusable()},nextFocusableIndex(){return(this.focusables().indexOf(document.activeElement)+1)%(this.focusables().length+1)},prevFocusableIndex(){return Math.max(0,this.focusables().indexOf(document.activeElement))-1},setShowPropertyTo(t){this.show=t,t?document.body.classList.add("overflow-y-hidden"):(document.body.classList.remove("overflow-y-hidden"),setTimeout(()=>{this.activeComponent=!1,this.$wire.resetState()},300))}});
